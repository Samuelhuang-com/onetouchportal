<!-- templates/events.html -->
{% extends "base.html" %} {% block title %}å…¬é—œè¡ŒéŠ· - {{ super() }}{% endblock
%} {% block content %}
<div class="page-header">
  <h2>å…¬é—œè¡ŒéŠ·</h2>
  {% if role == 'admin' %}
  <a href="/events/add" class="button">â• æ–°å¢æ´»å‹•</a>
  {% endif %}
</div>

<!-- æœå°‹æ¡† -->
<input
  type="text"
  id="searchInput"
  onkeyup="filterTable()"
  placeholder="ğŸ” æœå°‹æ´»å‹•åç¨±ã€è² è²¬äººã€åœ°é»..."
  style="
    width: 100%;
    padding: 10px;
    margin-bottom: 20px;
    box-sizing: border-box;
    border: 1px solid #ced4da;
    border-radius: 4px;
  "
/>

{% if events %}
<table>
  <thead>
    <tr>
      <th>æ—¥æœŸ</th>
      <th>æ´»å‹•åç¨±</th>
      <th>è² è²¬äºº</th>
      <th>åœ°é»</th>
      <th>æ´»å‹•æˆªæ­¢æ—¥</th>
    </tr>
  </thead>
  <tbody>
    {% for event in events %}
    <tr>
      <td>{{ event['æ—¥æœŸ'] }}</td>
      <!-- æª¢æŸ¥ç¶²å€æ˜¯å¦å­˜åœ¨ï¼Œè‹¥å­˜åœ¨å‰‡å°‡æ´»å‹•åç¨±è®Šæˆé€£çµ -->
      <td>
        {% if event['ç¶²å€'] %}
        <a
          href="{{ event['ç¶²å€'] }}"
          target="_blank"
          title="é»æ“Šå‰å¾€ï¼š{{ event['ç¶²å€'] }}"
        >
          {{ event['æ´»å‹•åç¨±'] }}
        </a>
        {% else %} {{ event['æ´»å‹•åç¨±'] }} {% endif %}
      </td>
      <td>{{ event['è² è²¬äºº'] }}</td>
      <td>{{ event['åœ°é»'] }}</td>
      <td>{{ event['æ´»å‹•æˆªæ­¢æ—¥'] }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>ç›®å‰æ²’æœ‰ä»»ä½•äº‹ä»¶ã€‚</p>
{% endif %}

<!-- JavaScript éæ¿¾åŠŸèƒ½ -->
<script>
  function filterTable() {
    // ç²å–æœå°‹æ¡†å’Œè¼¸å…¥çš„é—œéµå­—
    const input = document.getElementById("searchInput");
    const filter = input.value.toLowerCase();

    // ç²å–è¡¨æ ¼çš„æ‰€æœ‰è³‡æ–™åˆ—
    const rows = document.querySelectorAll("table tbody tr");

    // éæ­·æ¯ä¸€åˆ—ï¼Œå¦‚æœå…§å®¹åŒ…å«é—œéµå­—å°±é¡¯ç¤ºï¼Œå¦å‰‡éš±è—
    rows.forEach((row) => {
      const text = row.textContent.toLowerCase();
      row.style.display = text.includes(filter) ? "" : "none";
    });
  }
</script>
{% endblock %}
