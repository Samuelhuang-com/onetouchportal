<!-- templates/inline.html -->
{% extends "base.html" %} {% block title %}Google Sheet è³‡æ–™ - {{ super() }}{%
endblock %} {% block content %}
<div class="page-header">
  <h2>inline è¨‚ä½è³‡æ–™</h2>
</div>

<!-- æ–°å¢çš„æœå°‹æ¡† -->
<input
  type="text"
  id="searchInput"
  onkeyup="filterTable()"
  placeholder="ğŸ” åœ¨æ­¤è¡¨æ ¼ä¸­æœå°‹..."
  style="
    width: 100%;
    padding: 10px;
    margin-bottom: 20px;
    box-sizing: border-box;
    border: 1px solid #ced4da;
    border-radius: 4px;
  "
/>

{% if sheet_data %}
<table>
  <thead>
    <tr>
      <!-- å‹•æ…‹ç”Ÿæˆè¡¨æ ¼æ¨™é ­ -->
      {% for header in sheet_headers %}
      <th>{{ header }}</th>
      {% endfor %}
    </tr>
  </thead>
  <tbody>
    <!-- å‹•æ…‹ç”Ÿæˆè¡¨æ ¼å…§å®¹ -->
    {% for row in sheet_data %}
    <tr>
      {% for key in sheet_headers %}
      <td>{{ row[key] }}</td>
      {% endfor %}
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<div class="no-results">
  <p>ç„¡æ³•è¼‰å…¥ Google Sheet è³‡æ–™ï¼Œè«‹æª¢æŸ¥å¾Œç«¯æ—¥èªŒæˆ–ç¢ºèªç¶²å€æ˜¯å¦æ­£ç¢ºã€‚</p>
</div>
{% endif %}

<!-- æ–°å¢çš„ JavaScript éæ¿¾åŠŸèƒ½ -->
<script>
  function filterTable() {
    // ç²å–æœå°‹æ¡†å’Œè¼¸å…¥çš„é—œéµå­— (ä¸¦è½‰æ›ç‚ºå°å¯«ä»¥ä¾¿æ¯”å°)
    const input = document.getElementById("searchInput");
    const filter = input.value.toLowerCase();

    // ç²å–è¡¨æ ¼çš„æ‰€æœ‰è³‡æ–™åˆ—
    const rows = document.querySelectorAll("table tbody tr");

    // éæ­·æ¯ä¸€åˆ—ï¼Œå¦‚æœå…§å®¹åŒ…å«é—œéµå­—å°±é¡¯ç¤ºï¼Œå¦å‰‡éš±è—
    rows.forEach((row) => {
      const text = row.textContent.toLowerCase();
      row.style.display = text.includes(filter) ? "" : "none";
    });
  }
</script>
{% endblock %}
