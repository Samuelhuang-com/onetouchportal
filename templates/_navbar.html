<!-- templates/_navbar.html -->
<nav class="sidebar" role="navigation" aria-label="ä¸»é¸å–®">
  <!-- é ‚éƒ¨ + ä¸»å…§å®¹ -->
  <div class="sidebar-top-content">
    <!-- å“ç‰Œå€ -->
    <div class="sidebar-brand">
      <img
        src="{{ url_for('static', path='logo.png') }}"
        alt="å…¬å¸ Logo"
        class="logo brand-logo"
      />
      <strong class="portal-name">OneTouch Portal</strong>
    </div>

    <!-- å¯æ»¾å‹•ä¸»é«” -->
    <div class="sidebar-scrollable-content">
      <ul class="sidebar-links">
        {% for item in nav_items %} {% if not item.admin_only or
        (item.admin_only and role == 'admin') %} {% if item.sub_items %} {#
        æœ‰å­é¸å–® #} {% set submenu_id = 'submenu-' ~ loop.index0 %}
        <li class="has-submenu">
          <!-- é€™è£¡åŠ ä¸Š title="{{ item.name }}" -->
          <a
            href="#"
            class="submenu-toggle"
            role="button"
            aria-expanded="false"
            aria-controls="{{ submenu_id }}"
            title="{{ item.name }}"
          >
            <span class="icon">{{ item.icon | safe }}</span>
            <span class="link-name">{{ item.name }}</span>
            <span class="arrow" aria-hidden="true"></span>
          </a>
          <ul class="submenu" id="{{ submenu_id }}">
            {% for sub_item in item.sub_items %}
            <li>
              <!-- é€™è£¡åŠ ä¸Š title="{{ sub_item.name }}" -->
              <a
                href="{{ sub_item.url }}"
                class="{{ 'active' if sub_item.url == current_path else '' }}"
                aria-current="{{ 'page' if sub_item.url == current_path else '' }}"
                title="{{ sub_item.name }}"
              >
                <span class="link-name">{{ sub_item.name }}</span>
              </a>
            </li>
            {% endfor %}
          </ul>
        </li>

        {% else %} {# æ²’å­é¸å–®çš„æ™®é€šé …ç›® #}
        <li>
          <!-- é€™è£¡åŠ ä¸Š title="{{ item.name }}" -->
          <a
            href="{{ item.url }}"
            class="{{ 'active' if item.url == current_path else '' }}"
            aria-current="{{ 'page' if item.url == current_path else '' }}"
            title="{{ item.name }}"
          >
            <span class="icon">{{ item.icon | safe }}</span>
            <span class="link-name">{{ item.name }}</span>
          </a>
        </li>
        {% endif %} {% endif %} {% endfor %}
      </ul>
    </div>
  </div>

  <!-- é å°¾ -->
  <div class="sidebar-footer">
    <a href="/dashboard" title="å›é¦–é ">
      <span class="icon">ğŸ </span>
      <span class="link-name">å›é¦–é </span>
    </a>
    <a href="/logout" title="ç™»å‡º">
      <span class="icon">ğŸšª</span>
      <span class="link-name">ç™»å‡º</span>
    </a>
    <a href="#" id="sidebar-toggle" title="æ”¶åˆé¸å–®">
      <span class="icon toggle-icon">â†”ï¸</span>
      <span class="link-name">æ”¶åˆé¸å–®</span>
    </a>
  </div>
</nav>
